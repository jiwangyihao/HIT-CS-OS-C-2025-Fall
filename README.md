# HIT-CS-OS-C-2025-Fall
## 哈工大 操作系统C 2025秋 速记复原版
https://github.com/jiwangyihao/HIT-CS-OS-C-2025-Fall

题目是考场上速记以后让Gemini还原的

选择题答案是本人做的，大题答案懒得整理了（

### 一、单选题 (共 8 题，每题 1 分)

**1. 下列关于中断和系统调用的叙述中，正确的是：**

A. 操作系统通过系统调用来实现进程调度。  
B. 不同的操作系统为应用程序提供了统一的系统调用接口。  
**C. 中断发生时，CPU 处于内核态。**  
D. 每一个系统调用都有对应的一个内核服务例程。  

**2. 下列关于进程和线程的叙述中，错误的是：**

A. 进程申请临界资源可能导致阻塞。  
B. 用户级线程可在不支持内核级线程的操作系统上实现。  
**C. 同一进程的用户级线程间通信必须使用系统调用。**  
D. 用户级线程的系统调用会导致整个进程阻塞。  

**3. 某操作系统采用时间片轮转调度算法，时间片为 $10 \text{ms}$。系统中有 6 个进程，所有进程同时到达并按顺序排队。已知最后一个进程 $P$ 需要运行 $30 \text{ms}$ 的 CPU 时间，且 $P$ 的运行时间是所有进程中最短的。请计算进程 $P$ 的周转时间。**

A. $200 \text{ms}$   
**B. $180 \text{ms}$**  
C. $175 \text{ms}$   
D. $150 \text{ms}$   

**4. 下列关于临界区的叙述中，正确的是：**

**A. 临界区是指进程中用于访问临界资源的那段代码。**  
B. 临界区是指进程中用于实现进程互斥的那段代码。  
C. 每个进程只能拥有一个临界区。  
D. 一个访问临界区的进程被阻塞后，应允许其他进程进入临界区。  

**5. 下列关于多级页表的优点，叙述正确的是：**

A. 加快逻辑地址到物理地址的转换速度。  
B. 减少缺页中断速度。  
C. 减少页表项字节数。  
**D. 减少页表所占用的连续内存空间。**  

**6. 某进程运行时得到 4 个物理页框，页面访问序列为 $2, 0, 2, 9, 3, 4, 2, 8, 4, 2$。若接下来将要访问页面 $9$，采用 LRU 页面置换算法，被淘汰的页是哪个？**

**A. 3**  
B. 4  
C. 8  
D. 2  

**7. 下列关于文件系统的叙述中，错误的是：**

A. 当一个文件被用户进程首次打开时，操作系统需要读取文件控制块。  
**B. 当多个进程共享一个文件时，它们在打开文件表中的表项内容是相同的。**  
C. 在操作系统的全局打开文件表中，一个文件只有一个表项。  
D. 删除一个文件时，操作系统需要删除目录项和文件控制块。  

**8. Linux0.11内核在启动后，是如何切换到第一个用户进程中执行的？**

A. 直接跳转到用户进程的地址空间。  
B. 通过 TSS 段跳转。  
**C. 通过中断返回指令。**  
D. 通过普通的函数返回指令。  

---

### 二、内存管理 (共 8 分)

**1. 请说明下列四种内存分配管理方式下，可能产生内部碎片和/或外部碎片的情况。（4 分）**
* 固定分区：
* 动态分区：
* 分页式管理：
* 分段式管理：

**2. 假设某系统采用二级页表的分页机制，页大小 $P = 4 \text{KB}$。进程的页目录基址寄存器 $\text{CR3}$ 的值为 $0x0$。请描述逻辑地址 $0x00400C78$ 转换为物理地址的主要过程。（4 分）**

> 注：这题就是没给任何数据，直接描述步骤应该就行

---

### 三、同步与并发 (共 9 分)

**1. 请指出使用专用机器指令实现进程互斥的主要缺点。并简要回答，为什么信号量没有这些缺陷。（3 分）**

**2. 两个生产者进程分别生产 A、B 两种数据，一个消费者进程利用 A、B 两种数据计算显示数据 C。数据 A 和 B 分别被放在两个循环队列 F1 和 F2 上，队列容量都是 10 个。生产者 1 每次生产 1 份 A 数据，生产者 2 每次生产 1 份 B 数据。消费者每次需要消耗 2 份 A 数据和 3 份 B 数据，然后计算并显示数据 C。请用信号量进行正确管理。（6 分）**

---

### 四、进程调度 (共 8 分)

**1. 请描述一种实时系统调度算法的具体调度过程。（3 分）**

**2. 假设系统采用多级反馈队列调度算法，且队列 $Q_j$ 的时间片 $q$ 满足 $q = 2^j$ 的关系（其中 $j$ 为队列编号，从 0 开始）。已知有四个进程的到达时间和所需运行时间如下表所示：**

| 进程 | 到达时间 (ms) | 所需运行总时间 (ms) |
| :--: | :------------: | :-------------------: |
| $P_1$ | 0 | 3 |
| $P_2$ | 1 | 5 |
| $P_3$ | 2 | 6 |
| $P_4$ | 3 | 1 |

**请以图表或表格描述的方式，表示出 $P_1, P_2, P_3, P_4$ 在多级反馈队列调度下的完整调度过程。（5 分）**

---

### 五、I/O 系统与磁盘管理 (共 8 分)

**1. 假设当前磁头位于 58 号磁道，并正向磁道编号增大的方向移动。当前请求队列为 $130, 42, 180, 15, 99, 89, 55$。请使用 SCAN（扫描/电梯）磁盘调度算法，写出磁头响应请求的移动序列。（3 分）**

**2. 某文件系统采用混合索引分配方式，磁盘使用位图法管理物理块，磁盘块大小为 $4 \text{KB}$。文件的索引结点中包含：10 个直接索引、1 个一级索引、1 个二级索引。请详细描述操作系统为该文件分配空间并完成 $2 \text{MB}$ 数据写入的完整过程。（5 分）**

---

### 六、综合题 (9 分)

**假设你需要为操作系统新增一个系统调用。该系统调用的功能是：**
1. 在指定的路径 `/usr/var/` 下创建一个新文件。
2. 新文件的文件名使用当前的系统滴答数作为名称。
3. 文件内容包含系统中所有活动进程的进程 ID 和进程状态。

**请详细描述：**
1. 实现该系统调用的完整创建过程。
2. 该系统调用执行的主要过程。
